<!DOCTYPE html>
<html>
<head>
	<!-- msrit Assist -->
	<title>Blood Donors</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script language="javascript" type="text/javascript" src="js/p5.js"></script>
	<script language="javascript" type="text/javascript" src="js/p5.dom.js"></script>
	<script type="text/javascript" src="js/exam.js"></script>


	<script src="https://www.gstatic.com/firebasejs/5.8.5/firebase.js"></script>


	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>
<body onload="myFunction()";>

	<div class="fixed-top">

		<nav class="navbar navbar-expand-lg navbar-dark mx-background-top-linear">
			<div class="container">
				<a class="navbar-brand" href="index.html" style="text-transform: uppercase;"> Blood Donors</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarResponsive">

					<ul class="navbar-nav ml-auto">

						<li class="nav-item active">
							<a class="nav-link" href="index.html">Home
								<span class="sr-only">(current)</span>
							</a>
						</li>

          <!-- <li class="nav-item">
            <a class="nav-link" href="sis.html">SIS Portal</a>
        </li> -->
<!-- 
        <li class="nav-item">
        	<a class="nav-link" href="exam.html">Exam results</a>
        </li>
 -->
        <li class="nav-item">
        	<a class="nav-link" href="blood_donor_auth.html">Blood donors</a>
        </li>

        <li class="nav-item">
        	<a class="nav-link" href="about.html">About</a>
        </li>

        <li class="nav-item">
        	<a class="nav-link" href="feedback.html">Feedback</a>
        </li>
    </ul>
</div>
</div>
</nav>
</div>

<h2 id ="exam_head">Blood Donors Registration</h2>






<div class="container" id="examf1" style="width:100%">

	<div class="panel-group" >
		<div class="panel panel-primary" >
			<!-- <div class="panel-heading">Blood Donors</div> -->



			<div class="panel-body" >
				<form id='form1'method="GET">
					<div class="form-group">
						<label for="inputEmail4">Name</label>
						<input type="text" class="form-control" id="a1" name="name" placeholder="name" required>
					</div>

					<div class="form-group">
						<label class="mr-sm-2" for="inlineFormCustomSelect">Blood type</label>
						<select class="custom-select mr-sm-2" id="a2" name ="blood" required="" >

							<option value="O+">O+</option>
							<option value="A+">A+</option>
							<option value="B+">B+</option>
							<option value="AB+">AB+</option>
							<option value="O-">O-</option>
							<option value="A-">A-</option>
							<option value="B-">B-</option>
							<option value="AB-">AB-</option>

						</select>
					</div>

					<div class="form-group">
						<label class="mr-sm-2" for="age1">Age Group</label>
						<select class="custom-select mr-sm-2" id="a3" name ="age" required="" >

							<option value="<18">Below 18</option>
							<option value="18-25">18-25</option>
							<option value=">25">Above 25</option>

						</select>
					</div>

					<div class="form-group">
						<label class="mr-sm-2" for="inlineFormCustomSelect">Gender</label>
						<label class="radio-inline">
							<input type="radio" name="gender" value="male" required>Male
						</label>
						<label class="radio-inline">
							<input type="radio" name="gender" value="female" required>Female
						</label>

					</div>

					<button type="button" style="background-color: green; display: block;" class="btn btn-primary" id='demo' onclick="get()">Get my location</button>
					
					<p style="display: none;" id='demo1'><strong>Your loaction has been registered</strong></p>
					
					<div class="form-group">
						<label for="inputPassword4">Contact Info(Phone Number)</label>
						<input type="text" class="form-control" id="a5" name="contact" placeholder="Contact"  required>
					</div>

					<div class="form-group">
						<label for="exampleInputEmail1">Email address</label>
						<input type="email" class="form-control" id="a6" aria-describedby="emailHelp" placeholder="Email" name ="email" required >
						<small id="emailHelp" class="form-text text-muted" >We'll never share your contact info with anyone else.</small>
					</div>
					
					


					<button type="button" class="btn btn-primary" onclick="putinfo()">Submit</button>
				</form>
			</div>

		</div>
	</div>
</div>


</body>
<script type="text/javascript">

var x = document.getElementById("demo");
var x1 = document.getElementById("demo1");
var lat;
var long;
function get() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else { 
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

function showPosition(position) {
  lat = position.coords.latitude ; 
  long = position.coords.longitude;
  console.log(lat,long);
  x.style.display = 'none';
  x1.style.display = 'block';
}





	var config = {
		apiKey: "AIzaSyCvLRwJ4PNd4joJKBjbe8458QLGuey1qYg",
		authDomain: "techmsrit1.firebaseapp.com",
		databaseURL: "https://techmsrit1.firebaseio.com",
		projectId: "techmsrit1",
		storageBucket: "techmsrit1.appspot.com",
		messagingSenderId: "193681871061"
	};
	firebase.initializeApp(config);

	var ref = firebase.database().ref("donors/");

	function putinfo(){

		var name = document.getElementById('a1').value;
		var blood = document.getElementById('a2').value;
		var age = document.getElementById('a3').value;
		var contact = document.getElementById('a5').value;
		var mail = document.getElementById('a6').value;
		try{var gender = document.querySelector('input[name="gender"]:checked').value;

	if(name != null && blood != null && age != null && contact != null && mail != null && gender && x.style.display != 'block')
		{


		var  m = mail.replace('@','');
		m = m.replace('.','');
		var ref = firebase.database().ref("donors/"+m+'/');
		ref.set ({
			avail : "avail",
			name : name,
			blood : blood,
			age : age,
			contact : contact,
			mail : mail,
			gender : gender,
			lat : lat,
			long : long
			
		});

		alert('Registered successfully :)');
		document.getElementById('form1').reset();


		}
		else{
			alert('please fill all fields');
		}
}

		catch(err){alert('please fill gender field');

		console.log(err);}
		

		

	}

</script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script>

</html>